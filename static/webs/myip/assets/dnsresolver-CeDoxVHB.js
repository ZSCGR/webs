import{u as v,a as _,b as a,d as s,n as u,t as i,w as y,z as b,A as k,f as g,i as p,F as S,k as w,o as c,p as R,j as f}from"./vendor-Dww-ccMT.js";import{_ as C}from"./index-cTDpMoY0.js";const M={name:"DNSResolver",setup(){const e=v(),t=_(()=>e.state.isDarkMode),d=_(()=>e.state.isMobile);return{isDarkMode:t,isMobile:d}},data(){return{queryURL:"",queryType:"A",dnsCheckStatus:"idle",errorMsg:"",combinedResults:null}},methods:{validateInput(e){e.match(/^https?:\/\//)||(e="http://"+e);try{const d=new URL(e).hostname;if(d.match(/^[a-z0-9-]+(\.[a-z0-9-]+)*\.[a-z]{2,}$/i))return d}catch{}return this.errorMsg=this.$t("dnsresolver.invalidURL"),null},changeType(e){this.queryType=e},onSubmit(){this.$trackEvent("Section","StartClick","DNSResolver"),this.errorMsg="";const e=this.validateInput(this.queryURL),t=this.queryType;e&&this.getDNSResults(e,t)},async getDNSResults(e,t){this.combinedResults=[],this.dnsCheckStatus="running";try{const d=await fetch(`/api/dnsresolver?hostname=${e}&type=${t}`);if(!d.ok)throw new Error("Network response was not ok");const l=await d.json();this.processResults(l),this.dnsCheckStatus="idle",this.errorMsg=""}catch(d){console.error("Error fetching DNS results:",d),this.dnsCheckStatus="idle",this.errorMsg=this.$t("dnsresolver.fetchError")}},processResults(e){const t=(d,l)=>d.map(o=>{const n=Object.keys(o)[0],r=Array.isArray(o[n])?o[n].join(", "):o[n];return{provider:`${n} (${l})`,address:r}});e.result_dns&&this.combinedResults.push(...t(e.result_dns,"DNS")),e.result_doh&&this.combinedResults.push(...t(e.result_doh,"DoH ðŸ”’"))}}},h=e=>(R("data-v-663d5f7f"),e=e(),f(),e),T={class:"dns-resolver-section mb-4"},N={class:"jn-title2"},A={class:"text-secondary"},D={class:"row"},q={class:"col-12 mb-3"},L={class:"card-body mb-3"},U={class:"col-12 col-md-auto"},E={for:"queryURL",class:"col-form-label"},j={class:"input-group mb-2 mt-2"},I=["disabled","placeholder"],z={type:"button",class:"btn btn-primary dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},V=h(()=>s("span",{class:"visually-hidden"},"Choose Type",-1)),X={class:"dropdown-menu dropdown-menu-end"},B=h(()=>s("span",{class:"dropdown-item"},"A",-1)),x=[B],F=h(()=>s("span",{class:"dropdown-item"},"AAAA",-1)),K=[F],P=h(()=>s("span",{class:"dropdown-item"},"CNAME",-1)),H=[P],O=h(()=>s("span",{class:"dropdown-item"},"MX",-1)),G=[O],J=h(()=>s("span",{class:"dropdown-item"},"NS",-1)),Q=[J],W=h(()=>s("span",{class:"dropdown-item"},"TXT",-1)),Y=[W],Z=["disabled"],$={key:0},ss={key:1,class:"spinner-grow spinner-grow-sm","aria-hidden":"true"},es={class:"jn-placeholder"},ts={key:0,class:"text-danger"},os={key:0},rs={class:"table-responsive text-nowrap"},ns={scope:"col"},ds={scope:"col"};function is(e,t,d,l,o,n){return c(),a("div",T,[s("div",N,[s("h2",{id:"DNSResolver",class:u({"mobile-h2":l.isMobile})},"ðŸ”¦ "+i(e.$t("dnsresolver.Title")),3)]),s("div",A,[s("p",null,i(e.$t("dnsresolver.Note")),1)]),s("div",D,[s("div",q,[s("div",{class:u(["card jn-card",{"dark-mode dark-mode-border":l.isDarkMode}])},[s("div",L,[s("div",U,[s("label",E,i(e.$t("dnsresolver.Note2")),1)]),s("div",j,[y(s("input",{type:"text",class:u(["form-control",{"dark-mode":l.isDarkMode}]),disabled:o.dnsCheckStatus==="running",placeholder:e.$t("dnsresolver.Placeholder"),"onUpdate:modelValue":t[0]||(t[0]=r=>o.queryURL=r),onKeyup:t[1]||(t[1]=k((...r)=>n.onSubmit&&n.onSubmit(...r),["enter"])),name:"queryURL",id:"queryURL","data-1p-ignore":""},null,42,I),[[b,o.queryURL]]),s("button",z,[g(i(o.queryType)+" "+i(e.$t("dnsresolver.Record"))+" ",1),V]),s("ul",X,[s("li",{onClick:t[2]||(t[2]=r=>n.changeType("A"))},x),s("li",{onClick:t[3]||(t[3]=r=>n.changeType("AAAA"))},K),s("li",{onClick:t[4]||(t[4]=r=>n.changeType("CNAME"))},H),s("li",{onClick:t[5]||(t[5]=r=>n.changeType("MX"))},G),s("li",{onClick:t[6]||(t[6]=r=>n.changeType("NS"))},Q),s("li",{onClick:t[7]||(t[7]=r=>n.changeType("TXT"))},Y)]),s("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...r)=>n.onSubmit&&n.onSubmit(...r)),disabled:o.dnsCheckStatus==="running"},[o.dnsCheckStatus==="idle"?(c(),a("span",$,i(e.$t("dnsresolver.Run")),1)):p("",!0),o.dnsCheckStatus==="running"?(c(),a("span",ss)):p("",!0)],8,Z)]),s("div",es,[o.errorMsg?(c(),a("p",ts,i(o.errorMsg),1)):p("",!0)]),o.combinedResults&&o.combinedResults.length?(c(),a("div",os,[s("div",rs,[s("table",{class:u(["table table-hover",{"table-dark":l.isDarkMode}])},[s("thead",null,[s("tr",null,[s("th",ns,i(e.$t("dnsresolver.Provider")),1),s("th",ds,i(e.$t("dnsresolver.Result")),1)])]),s("tbody",null,[(c(!0),a(S,null,w(o.combinedResults,(r,m)=>(c(),a("tr",{key:m},[s("td",null,i(r.provider),1),s("td",{class:u([r.address==="N/A"?"opacity-50":""])},i(r.address),3)]))),128))])],2)])])):p("",!0)])],2)])])])}const cs=C(M,[["render",is],["__scopeId","data-v-663d5f7f"]]);export{cs as default};
