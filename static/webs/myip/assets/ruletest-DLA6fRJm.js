import{u as m,a as $,q as S,b as u,d as e,n as r,t as l,w as _,F as f,k as W,r as b,o as c,f as p,i as k,p as T,j as g}from"./vendor-Dww-ccMT.js";import{_ as v}from"./index-cTDpMoY0.js";const w={name:"RuleTest",setup(){const s=m(),a=$(()=>s.state.isDarkMode),i=$(()=>s.state.isMobile);return{isDarkMode:a,isMobile:i}},data(){return{testCount:8,ruleTests:[{id:1,name:this.$t("ruletest.Name"),url:"ptest-1.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:2,name:this.$t("ruletest.Name"),url:"ptest-2.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:3,name:this.$t("ruletest.Name"),url:"ptest-3.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:4,name:this.$t("ruletest.Name"),url:"ptest-4.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:5,name:this.$t("ruletest.Name"),url:"ptest-5.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:6,name:this.$t("ruletest.Name"),url:"ptest-6.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:7,name:this.$t("ruletest.Name"),url:"ptest-7.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")},{id:8,name:this.$t("ruletest.Name"),url:"ptest-8.ipcheck.ing",ip:this.$t("ruletest.StatusWait"),country_code:this.$t("ruletest.StatusWait"),country:this.$t("ruletest.StatusWait")}],IPArray:[]}},methods:{async fetchTrace(s,a){try{const n=(await(await fetch(`https://${a}/cdn-cgi/trace`)).text()).split(`
`),h=n.find(t=>t.startsWith("ip=")),d=n.find(t=>t.startsWith("loc="));if(h){const t=h.split("=")[1];this.ruleTests[s].ip=t,this.IPArray=[...this.IPArray,t]}if(d){const t=d.split("=")[1];this.ruleTests[s].country_code=t,this.ruleTests[s].country=S.byIso(t).country}}catch(i){this.ruleTests[s].ip=this.$t("ruletest.StatusError"),this.ruleTests[s].country_code=this.$t("ruletest.StatusError"),this.ruleTests[s].country=this.$t("ruletest.StatusError"),console.error("Error fetching Data:",i)}},async checkAllRuleTest(s=!1){s&&this.ruleTests.forEach(i=>{i.ip=this.$t("ruletest.StatusWait"),i.country_code=this.$t("ruletest.StatusWait")});const a=async i=>{if(i<this.testCount)try{await this.fetchTrace(i,this.ruleTests[i].url)}catch(o){console.error("Error fetching Data:",o)}finally{a(i+1)}};a(0)}},mounted(){setTimeout(()=>{this.checkAllRuleTest()},1e3)},watch:{IPArray:{handler(){this.$store.commit("updateGlobalIpDataCards",this.IPArray)},deep:!0}}},y=s=>(T("data-v-1071e189"),s=s(),g(),s),N={class:"rule-test-section mb-4"},D={class:"jn-title2"},I=y(()=>e("i",{class:"bi bi-arrow-clockwise"},null,-1)),C=[I],E={class:"text-secondary"},R={class:"row"},A={class:"card-body"},M={class:"jn-con-title card-title"},j=y(()=>e("i",{class:"bi bi-signpost-split-fill"},null,-1)),L={class:"card-text text-secondary",style:{"font-size":"10pt"}},P=y(()=>e("i",{class:"bi bi-hdd-network-fill"},null,-1)),z=["data-bs-theme"];function B(s,a,i,o,n,h){const d=b("tooltip");return c(),u("div",null,[e("div",N,[e("div",D,[e("h2",{id:"RuleTest",class:r({"mobile-h2":o.isMobile})},"🚏 "+l(s.$t("ruletest.Title")),3),_((c(),u("button",{onClick:a[0]||(a[0]=t=>h.checkAllRuleTest(!0)),class:r(["btn",o.isDarkMode?"btn-dark dark-mode-refresh":"btn-light"]),"aria-label":"Refresh Rule Test"},C,2)),[[d,s.$t("Tooltips.RefreshRuleTests")]])]),e("div",E,[e("p",null,l(s.$t("ruletest.Note")),1)]),e("div",R,[(c(!0),u(f,null,W(n.ruleTests,t=>(c(),u("div",{key:t.id,class:"col-lg-3 col-md-6 col-12 mb-4"},[e("div",{class:r(["card jn-card",{"dark-mode dark-mode-border":o.isDarkMode}])},[e("div",A,[e("p",M,[j,p(" "+l(t.name)+" ",1),e("i",{class:r(["bi","bi-"+t.id+"-square"])},null,2),p("  ")]),e("p",L,[P,p(" "+l(t.url),1)]),e("p",{class:r(["card-text",{"text-info":t.ip===s.$t("ruletest.StatusWait"),"text-success":t.ip.includes(".")||t.ip.includes(":"),"text-danger":t.ip===s.$t("ruletest.StatusError")}])},[e("i",{class:r(["bi",[t.ip===s.$t("ruletest.StatusWait")?"bi-hourglass-split":"bi-pc-display-horizontal"]])}," ",2),e("span",{class:r({"jn-ip-font":t.ip.length>32})},l(t.ip),3)],2),e("div",{class:r(["alert",{"alert-info":t.country_code===s.$t("ruletest.StatusWait"),"alert-success":t.country_code!==s.$t("ruletest.StatusWait")}]),"data-bs-theme":o.isDarkMode?"dark":""},[e("i",{class:r(["bi",[t.ip===s.$t("ruletest.StatusWait")||t.ip===s.$t("ruletest.StatusError")?"bi-hourglass-split":"bi-geo-alt-fill"]])},null,2),p(" "+l(s.$t("ruletest.Country"))+": ",1),e("strong",null,l(t.country)+" ",1),t.country_code!==s.$t("ruletest.StatusWait")?(c(),u("span",{key:0,class:r("jn-fl fi fi-"+t.country_code.toLowerCase())},null,2)):k("",!0)],10,z)])],2)]))),128))])])])}const F=v(w,[["render",B],["__scopeId","data-v-1071e189"]]);export{F as default};
